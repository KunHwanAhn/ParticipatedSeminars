# HTTP에 관하여([Link](https://developer.mozilla.org/ko/docs/Web/HTTP/Overview))

## HTTP란?([Link](https://developer.mozilla.org/ko/docs/Web/HTTP/Overview))
- HTML문서와 같은 리소스들을 가져올 수 있도록 해주는 프로토콜, 어플리케이션 레이어 상에서 동작함
- Request: 클라이언트에 의해 전송되는 메시지
- Response: 서버에서 응답으로 전성되는 메시지

## HTTP 기반 시스템의 컴포넌트

### 클라이언트: 사용자 에이전트
- 사용자를 대신하여 동작하는 모든 도구, 브라우저에 의해 수행된다.
- 브라우저는 항상 Request를 보내는 개체
- 웹페이지를 표시하기 위해, 브라우저는 HTML 문서를 가져오기 위한 Reqeust를 전송한 뒤, 파일 구문을 분석하여 실행할 스크립트 및 하위 리소스들(이미지, 비디오 등)을 잘 표시하기 위한 레이아웃 정보(CSS)에 대응하는 추가적인 요청을 가져온다. 그 이후 모든 린소스를 혼합한다.

### 웹서버(Web Server)
- 통신 채널의 반대편에는 클라이언에 의한 요청에 대한 문서를 제공하는 서버가 존재한다.

### 프록시(Proxy)
- 브라우저와 서버 사이에는 많은 컴퓨터들과 머신들을 통해서 HTTP 메시지를 릴레이 한다.
- 웹 스택의 계층 구조 덕분에, 대부분은 전송, 네트워크, 물리적 수준에서 동작하며, HTTP 계층에서는 눈에 보이지 않는다.
- 애플리케이션 계증에서 릴레이(Relay)하는 것을 프록시라 부른다.
  - 캐싱, 브라우저 캐시처럼 공개되거나 비공개될 수 있다.
  - 필터링, 바이러스 백신 스캔, 유해 컨텐츠 차단등 과 같은
  - 여러 서버들이 서로 다은 요청을 처리하도록 해주는 로드 밸런싱
  - 다른 리소스에 접근하도록 제어해주는 인증
  - 이력 정보를 저장해주는 로깅

## HTTP의 기초적인 측면

### HTTP는 간단합니다.
- HTTP는 일반적으로 사람이 읽을 수 있으며 간단하게 고안되었다.
- HTTP 메시지들은 사람이 읽을 수 있고 이해하기 가능하도록 하여, 테스트하기 쉽고 초심자의 진입장벽을 낮췄다.

### HTTP는 확장 가능합니다.
- HTTP/1.0에서 소개된, `HTTP 헤더`는 프로토콜을 확장하고 실험하기 극도로 쉽게 만들어 주었습니다.

### HTTP는 상태가 없지만, 세션은 있습니다.
- HTTP는 상태가 없습니다: 동일한 연결 상에서든 아니든 성공적으로 완료된 두 개의 요청 사이에는 연결고리가 없습니다.
- 하지만, 헤더 확장성을 사용하여, 동일한 컨텍스트, 동일한 상태를 공유하기 위해 각각의 요청들에 세션을 만들도록 `HTTP 쿠키`가 추가되었습니다.
- HTTP의 핵심은 상태가 없는 것이지만, 쿠키의 사용은 상태가 있는 세션을 만들도록 해줍니다.

### HTTP와 커넥션
- 연결은 전송계층에서 제어되므로 근본적으로 HTTP 영역 밖입니다.
- HTTP는 필수는 아니지만, 연결 기반이 될 수 도 있는 TCP에 의존합니다.
- HTTP/1.1은 파이프라이닝 개념과 지속적인 연결의 개념을 도입했습니다.

## HTTP로 제어할 수 있는 것
- HTTP의 확장 가능한 특성은 수년 간에 걸쳐 웨의 점점 더 많은 기능들을 제어하도록 허용되어 왔습니다.
- 캐시 혹은 인증 메서드는 HTTP 초기부터 제어해왔던 기능이며, 반면에 `origin` 제약사항을 완화시키는 조치는 2010년에 들어서 추가되었습니다.

### 캐시
- HTTP로 문서가 캐시되는 방식을 제어할 수 있습니다.
- 서버는 캐시 대상과 기간을 프록시와 클라이언트에 지시할 수 있고, 클라이언트는 저장된 문서를 무시하라고 중간 캐시 프록시에게 지시할 수 있습니다.

### origin 제약사항을 완화하기
- 스누핑과 다른 프라이버시 침해를 막기 위해, 브라우저는 웹 사이트간의 업격한 분리를 강제합니다.
- `동일한 origin`으로부터 온 페이지만이 웹 페이지의 전체 정보에 접근할 수 있죠.
- `HTTP 헤더`를 통해 제약사항을 완화시킬 수 있습니다.

### 인증
- 기본 인증은 `Authenticate`와 그와 유사한 헤더들을 사용해 HTTP에 의해 직접 제공될 수 있으며, 혹은 HTTP 쿠키를 사용해 특정 세션을 설정하여 이루어질 수도 있습니다.

### 프록시와 터널링

### 세션
- 쿠키 사용은 서버 상태를 요청과 연결하도록 해줍니다.

## HTTP 흐름
- TCP 연결을 엽니다.
- HTTP 메시지를 전송합니다.
- 서버에 의해 전송된 응답을 읽어들입니다.
- 커넥션을 닫거나 다른 요청들을 위해 재사용합니다.

## HTTP 메시지
- HTTP/1.1과 초기 HTTP 메시지는 사람이 읽을 수 있습니다.
- HTTP/2에서, 이 메시지들은 새로운 구조인 프레임 안으로 임베드되어, 헤더의 압축과 다중화와 같은 최적화를 가능케 합니다.

### Request
```
GET / HTTP/1.1
Host: developer.mozilla.org
Accept-Language: fr
```

- 보통 `GET`, `POST` 같은 동사 혹은 OPTIONS나 HEAD와 같은 명사의 HTTP `메서드`는 클라이언트가 실행하고자 하는 동작을 정의합니다.
- 가져오려는 리소스의 경로로, protocol(`http://`), domain(여기서는 developer.mozilla.org) 또는 TCP port(여기서는 80)인 요소들을 제거한 리소스의 URL 입니다.
- HTTP 프로토콜의 버전
- 서버에 대한 추가정보를 전달하는 선택적 헤더들
- `POST`와 같은 몇 가지 메서드를 위한, 전송된 리소스를 포함하는 response의 본문과 유사한 본문.

### Response
```
HTTP/1.1 200 OK
Date: Sat, 09 Oct 2010 14:28:02 GMT
Server: Apache
Last-Modified: Tue, 01 Dec 2009 20:18:22 GMT
ETag: "51142bc1-7449-479b075b2891b"
Accept-Ranges: bytes
Content-Length: 29769
Content-Type: text/html
```

- HHTP 프로토콜의 버전
- 요청의 성공 여부와, 그 이유를 나타내는 `상태 코드`
- 아무런 영향력이 없는, 상태 코드의 짧은 설명을 나타내는 상태메시지
- 요청과 비슷한, HTTP 헤더들
- 선택 사항으로, 요청의 경우보다 좀 더 일반이며 가져온 리소스가 포함되는 본문
